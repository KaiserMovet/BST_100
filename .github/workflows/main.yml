name: BST Workflow

on: [push, pull_request]

jobs:
  # startup:
  #   runs-on: ubuntu-latest
  #   steps:
  #     - name: Checkout code
  #       uses: actions/checkout@v2

  runner:
    # needs: startup
    runs-on: ubuntu-latest
    strategy:
      matrix:
        amount: [10, 20, 40]
    container:
      image: python:3.11
    steps:
      - name: Checkout code
        uses: actions/checkout@v2
      - name: Run bst
        uses: ".github/template/runner"
        with:
          folder: python3
          run_command: python main.py

  summary:
   needs: runner
   runs-on: ubuntu-latest
   steps:
     - name: Checkout code
       uses: actions/checkout@v2
    #  - name: Make temp folder
    #    run: mkdir  ${{ github.workspace }}/temp
     - name: Download Output
       uses: actions/download-artifact@v3
       with:
         path:  ${{ github.workspace }}/temp
     - name: Generate Summary
       run: ls -R
       working-directory: ${{ github.workspace }}/temp
    #  - name: Commit and Push
    #    run: |
    #      git config --global user.name 'GitHub Actions'
    #      git config --global user.email 'github-actions@github.com'
    #      git add .
    #      git commit -m "Add summary"
    #      git push
